@startuml
skinparam classAttributeIconSize 0

class User {
    -int id
    -string name
    -string email
    -Date createdAt
    +validate() : boolean
    +toJSON() : Object
}

class Task {
    -int id
    -string title
    -string description
    -int userId
    -string status
    -Date createdAt
    -Date updatedAt
    +validate() : boolean
    +updateStatus(newStatus) : boolean
    +toJSON() : Object
}

class UserController {
    -User[] users
    -int nextId
    +getAllUsers(req, res)
    +getUserById(req, res)
    +createUser(req, res)
    +updateUser(req, res)
    +deleteUser(req, res)
}

class TaskController {
    -Task[] tasks
    -int nextId
    +getAllTasks(req, res)
    +getFilteredTasks(req, res)
    +getTaskById(req, res)
    +createTask(req, res)
    +updateTask(req, res)
    +deleteTask(req, res)
}

class Validator <<middleware>> {
    +userSchema : Joi.Schema
    +taskSchema : Joi.Schema
    +taskUpdateSchema : Joi.Schema
    +validate(schema) : Function
}

class AppError {
    -int statusCode
    -string status
    -boolean isOperational
    +constructor(message, statusCode)
}

class ErrorHandler <<middleware>> {
    +errorHandler(err, req, res, next)
    +catchAsync(fn) : Function
    +notFound(req, res, next)
}

AppError --|> Error : extends
User "1" -- "*" Task : possède
UserController "1" -- "*" User : gère
TaskController "1" -- "*" Task : gère
Validator ..> UserController : valide entrées
Validator ..> TaskController : valide entrées
ErrorHandler ..> AppError : utilise
@enduml
